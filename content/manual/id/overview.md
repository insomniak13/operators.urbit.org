+++
title = "Overview"
description = "Une infrastructure à clé publique (ICP) est un système permettant de lier un ensemble de clés à un nom. Parfois, une petite quantité de métadonnées est incluse."
weight = 1
template = "doc.html"
+++

![](https://media.urbit.org/site/posts/essays/pki-maze.png)

Une infrastructure à clé publique (ICP) est un système permettant de lier un ensemble de clés à un nom. Parfois, une petite quantité de métadonnées est incluse.

Les clés privées existantes incluent le "[web of trust](https://en.wikipedia.org/wiki/Web_of_trust)" de style PGP, les [certificats SSL](https://en.wikipedia.org/wiki/Certificate_authority), [ZeroTier](https://www.zerotier.com/2019/06/30/lf-announcement/), [Keybase](https://keybase.io/), [OpenID](https://openid.net/what-is-openid/), [Mozilla Persona](https://developer.mozilla.org/en-US/docs/Archive/Mozilla/Persona) et [Login with Google](https://developers.google.com/identity?hl=fr). Celles-ci adoptent des approches uniques pour résoudre ce problème et ont obtenu un certain succès, mais aucune ne fournit des identités cohérentes, permanentes, et entièrement personelles à l'échelle mondiale. Une exploration et une catégorisation exhaustives sont malheureusement hors de portée de cet article, c’est pourauoi nous allons donc simplement décrire l'approche d'Urbit pour atteindre ces propriétés dans nos clés privées.

Dans Urbit, un "nom" est souvent appelé un "vaisseau" ou une "adresse" parce que nous utilisons les métadonnées des clés privées pour rendre les noms routables. L’ensemble des données sont composées de deux clés asymétriques de 256-bits, d’un numéro d’une suite cryptographique (pour permettre le changement d'algorithmes cryptographiques), le numéro de révision de la clé, et le nom d'un vaisseau à travers lequel ces données vont transiter. Cela représente moins de 128 octets de données.

Chaque clé privée s’articule autour de différentes propriétés. Nous avons opté pour un système tripartite afin de pouvoir faire des choix appropriés pour différents cas d'utilisation. Ici, nous explorons les différentes propriétés que nous avons choisies en suivant une série de choix binaires, qui pourrait être assimilé à un labyrinthe d'idées.

Il y a deux sortes de clé privée : celles qui vous permettent de changer vos clés et celles qui ne permettent pas ce changement. Si vous ne pouvez pas, alors votre nom est impermanent, car personne ne peut garder un jeu de clés en sécurité indéfiniment. Même si votre opsec ne tombe jamais en panne, vos algorithmes cryptographiques peuvent éventuellement être compromis.

Cependant, si vous sacrifiez la possibilité de changer vos clés, vous pouvez avoir de très belles propriétés : les clés auto-attestées. Si votre nom est un hachage de vos informations de clé publique, aucune autre source d'information n'est nécessaire pour vérifier que vous êtes bien celui que vous prétendez être. Il s'agit d'une propriété utile puisqu'elle ne nécessite aucune coordination. Beaucoup de choses sont impermanentes, surtout pendant le développement. Il offre également un moyen de tester le réseau sans obtenir une adresse permanente.

C'est notre premier arrêt dans le labyrinthe d'idées. Nous appelons ce genre de nom une "comète". Le nom d'une comète est l’encodage (hash) 128 bits de ses clés publiques.

Toutefois, Urbit t'appartient et c'est pour toujours. Vous ne devriez pas avoir à changer de nom à chaque fois que vous changez vos clés. Donc, nous retournons en arrière et faisons l'autre choix : vous devez pouvoir changer vos clés.

Pour changer de clé, vous devez signer un message avec les anciennes clés, les révoquant et fournissant les nouvelles[^0]. La question est de savoir ce qui se passe si les anciennes clés signent aussi un second ensemble de nouvelles clés. Cela pourrait se produire si un attaquant a obtenu vos anciennes clés après les faits. Ceci est important, car l'une des raisons avancée pour pouvoir changer vos clés est d'invalider les anciennes afin qu'elles n'aient plus de pouvoir.

Nous avons encore deux options : PKI peut être uniforme à l'échelle mondiale ou non. Être cohérent à l’échelle mondiale signifie que si vous pensez qu'un nom est lié à un ensemble de clés, alors personne sur le réseau ne sera en désaccord.

Si vous n'avez pas besoin de cohérence à l’échelle mondiale, vous pouvez signer ce message et l'envoyer à tous vos voisins, qui le transmettront, tout en espérant qu'il atteindra la majeure partie du réseau rapidement. Cependant, si l'un de ces vaisseaux reçoit deux versions contradictoires du message, la seule chose qu'il peut faire est de se fier au premier qu'il a entendu, ce qui peut être différent de ce que quelqu'un d'autre a entendu. Ce qui rend le processus cohérent de voisin à voisin mais pas à l’échelle mondiale. C'est essentiellement ainsi que le réseau Ames pré-blockchain fonctionnait, bien que les changements clés n'aient pas été réellement mis en œuvre. Parce ce qu’une cohérence à l’échelle est une propriété précieuse, nous avons été amenés à examiner d'autres options.

Pour obtenir une PKI cohérente à l'échelle mondiale vous permettant de révoquer des clés, vous devez pouvoir distinguer deux messages cryptographiques valides afin de déterminer lequel a été signé en premier. Ce double problème pourrait être résolu facilement; vous pouvez prouver qu'un message est signé après l'autre en incluant la signature du premier dans le second. Cela équivaut à lire la une d'un journal pour prouver qu'un message a été enregistré après une journée donnée.

Cependant, le problème lorsque l’on veut prouver qu'un message a été envoyé avant d'autres messages ultérieurs retourne le problème. Vous pouvez résoudre ce problème avec les journaux en plaçant le message dans le texte du journal. Alors que la lecture d'un journal n'exige aucune entité centrale, l'écriture en est une. Pendant longtemps, ce genre de message a toujours été traité par un parti central. Les révocations SSL sont gérées par quelques entités centrales. Par exemple, lors de l'achat d'une propriété, il ne suffit pas de faire signer le titre de propriété par l'ancien propriétaire; celui-ci doit être inscrit dans un registre foncier centralisé. Sinon, le propriétaire pourrait vendre sa propriété à plusieurs personnes et il n'y aurait aucun moyen de déterminer qui est le nouveau propriétaire. Avec le registre, il vous suffit de demander au cadastre quelle vente a eu lieu en premier, et c'est celle-ci qui compte.

Cependant, Urbit t'appartient, et ce, pour toujours. Faire confiance aux registres centraux compromet les deux. Le lecteur attentif remarquera que le problème de déterminer quelle rotation de clé est arrivé en premier est exactement le problème de double dépense que Satoshi a résolu avec son algorithme de preuve de travail pour Bitcoin. Son premier bloc inclut une entête de journal pour prouver que le bloc n’a pas été extrait avant cette date. Dans une belle dualité, son propre algorithme prouve qu'il n’a pas fait d’extraction après cette date.[^1]

Certains soutiennent que la blockchain n’a qu’un but foncier. Il s'agit d'une myopie qui repose généralement sur l'expérience selon laquelle son application la plus utile jusqu'à présent a été autour de l’argent. Cependant, la blockchain est une primitive cryptographique pour faire ce qui était auparavant impossible : prouver qu'un message a été signé avant un autre sans entité centrale. La Blockchain a été réalisée par quelqu'un qui essayait de créer de l'argent numérique, et il avait besoin de cette primitive, mais cela ne veut pas dire qu'elle ne sert uniquement à ça.

Ainsi, nous stockons nos données de clé privée sur une blockchain pour notre deuxième type de nom : les planètes. Une planète est une adresse 32 bits contenant des informations de stockage des clés  sur la blockchain.[^2] Le propriétaire d'une planète peut diffuser de nouvelles données de clé privée en les ajoutant à la blockchain. Tous les messages précédent les anciennes clés seront rejetées, et tout le monde sur le réseau écoutera la blockchain pour en extraire les données clés. Ainsi, nous avons une cohérence à l’échelle mondiale, la permanence et la souveraineté. Nous ne connaissons aucune autre solution qui peut fournir ces propriétés.

Néanmoins, même si les données des clés privées agrégées sont individuellement petites, elles peuvent devenir très importantes pour tous nœuds composant le réseau. Ce n'est pas un problème pour les comètes parce que personne n'a besoin de stocker les clés des comètes, à l'exception de celles avec lesquelles on communique, et même celles-ci peuvent être récupérées et redemandées et vérifiées. Pour les planètes, il y a un ensemble de clés canoniques, et quelqu'un doit les stocker. Il y a environ 2^32, soit 4 milliards de planètes. Si les données des clés privées sont d'environ 100 octets pour chaque planète, cela représente environ 400Go de données. C'est peut-être plus que ce que la plupart des utilisateurs souhaitent stocker, mais c'est suffisamment petit pour qu'il soit très bon marché d’héberger ces données pour de nombreux utilisateurs.[^3]

Ces informations sont actuellement stockées directement sur la blockchain Ethereum 1.0, bien que cette approche ne soit pas extensible au dela d’un certain point, comme l’ont bien compris les personnes faisant partie de cercles autour de la blockchain. De nombreuses chaînes poursuivent des conceptions qui permettent aux utilisateurs de stocker localement les données, leurs contrats intelligents (smart contracts) leur tenant à cœur et de ne transmettre que les hachages à la chaîne. Nous nous attendons à ce qu'il y ait plusieurs options viables pour cela au moment où nos besoins de mise à l'échelle dépassent ce qui est fourni par Ethereum 1.0. Cela nous libérera du coût d'hébergement des données des clés privées sur tous les nœuds Ethereum, mais les données doivent quand même être stockées quelque part. Tout service capable de traiter une telle quantité de données centraliserait intrinsèquement le réseau.

Cependant, aujourd'hui 4 milliards d'adresses ne suffisent pas pour tous les appareils électroniques de la planète, encore moins dans quelques décennies. Nous faisons tout notre possible pour réexaminer nos choix à chaque niveau et ce pour chaque cas d’utilisation. En examinant le labyrinthe d'idées ci-dessus, nous ne pouvons pas utiliser l'option blockchain pour tout car le stockage des données est trop limité. Cependant, il n'est pas vraiment nécessaire que chacun de vos appareils ait sa propre identité souveraine distincte de votre planète. Nous choisissons donc l'option d'utiliser un registre central : votre propre planète.

Nous allouons 4 milliards de "lunes" à chacune de ces planètes. Une lune est une adresse 64 bits dont le suffixe 32 bits est sa planète. Votre planète peut facilement stocker les clés de ses propres lunes, et quiconque a besoin de communiquer avec vos lunes, peut vous demander les clés.

C'est en ce sens que les lunes sont de véritables vaisseaux : ce sont des identités permanentes et vous les possédez entièrement, tant que vous possédez la planète. Cependant, ce ne sont pas des vaisseaux indépendants, leurs clés peuvent toujours être révoquées par leur planète.

Pour créer un réseau sain, nous avons besoin d'une cohérence à l’échelle globale pour toutes nos identités. Il y a trois autres propriétés ; choisissez-en deux :

- Les comètes sont impermanentes, souveraines et abondantes.
- Les planètes sont permanentes, souveraines et non abondantes.
- Les lunes sont permanentes, non souveraines, et abondantes

Point intéressant, les comètes sont les corps célestes parfaits pour tester diverses choses à faible valeur et éphémères. Les planètes sont l'endroit où vous pouvez construire une maison et la façonner à votre guise. Les gens peuvent toujours trouver votre planète, elle ne va nulle part. Les lunes sont utiles à des fins spécifiques, comme le stockage, l'industrie lourde, et tout ce que vous pourriez vouloir faire autre part que sur une planète. [^4]

[^0]: Ou l'équivalent avec une structure hiérarchique clé. En pratique, vous voulez avoir une clé principale qui signe une clé secondaire pour un usage quotidien. Utilisez la touche master afin de faire pivoter la touche junior.
[^1]: Strictement parlant : cela prouve qu'il n'a pas miné après les autres blocs actuellement sur la blockchain Bitcoin. Il donne seulement une commande dans la chaîne, pas un horodatage (timestamp).
[^2]: En plus des planètes, il y a des étoiles et des galaxies. Du point de vue des clés privé, elles sont traités exactement comme des planètes, mais sur le réseau elles fournissent des services d'infrastructure comme le routage.
[^3]: En pratique, il s'agira probablement d'un service inclus par votre étoile parrain. Il pourrait s'agir d'un service distinct, mais il sera très bon marché car il s'agit d'un service avec un coût de production faible et donc facile à produire. En tout cas, il ne devrait jamais dépasser le coût d'investissement d'un disque dur de 400 Go.
[^4]: Pour continuer la métaphore, les étoiles sont un endroit où il fait bon vivre, elles sont plus faciles pour les autres planètes à découvrir, donc quand elles veulent vous envoyer un message, il suffit d’abord de chercher votre étoile. S'ils ne savent pas où se trouve votre étoile, ils peuvent facilement trouver la galaxie de votre étoile, et cela suffira à localiser l'étoile. Bien sûr, si votre étoile ne fournit pas un service satisfaisant, vous pouvez prendre votre planète et vous déplacer vers une autre étoile.
